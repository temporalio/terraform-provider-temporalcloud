---
# generated by https://github.com/hashicorp/terraform-plugin-docs
page_title: "temporalcloud_namespace Resource - terraform-provider-temporalcloud"
subcategory: ""
description: |-
  Provisions a Temporal Cloud namespace.
  Regions available in Temporal Cloud: https://docs.temporal.io/cloud/regions.
  Note that regions are prefixed with the cloud provider (aws-us-east-1, not us-east-1)
---

# temporalcloud_namespace (Resource)

Provisions a Temporal Cloud namespace. 

Regions available in Temporal Cloud: https://docs.temporal.io/cloud/regions. 

Note that regions are prefixed with the cloud provider (aws-us-east-1, not us-east-1)

## Example Usage

```terraform
terraform {
  required_providers {
    tls = {
      source  = "hashicorp/tls"
      version = ">= 2.0.0"
    }
    temporalcloud = {
      source = "temporalio/temporalcloud"
    }
  }
}

provider "temporalcloud" {

}

// the following example demonstrates how to manage a namespace resource with a CA cert generated outside of Terrafrom

resource "temporalcloud_namespace" "terraform" {
  name               = "terraform"
  regions            = ["aws-us-east-1"]
  accepted_client_ca = base64encode(file("${path.module}/ca.pem"))
  retention_days     = 14
  namespace_lifecycle = {
    // Prevents namespace from being deleted accidentally. Must be updated to false before destroying resource.
    enable_delete_protection = true
  }
}

// the following example demonstrates how to use the hashi tls provider to generate certs for use in a namespace and end-entity
// the hasicorp tls provider is used to generate the namespace's ca cert
// for more information see the provider's documentation here https://registry.terraform.io/providers/hashicorp/tls/latest/docs
provider "tls" {
}

// root CA example - the namespace cert
// This cert is not stored anywhere locally. 
// If new certificates are needed you need to regenerate all of them (including the client end-entity certs).
resource "tls_self_signed_cert" "ca" {
  private_key_pem = tls_private_key.ca.private_key_pem
  subject {
    // arguments to to supply for the format function are the namespace name, region, and account id
    common_name = format("%s-%s.%s", "terraform2", ["aws-us-east-1"], "terraform")
    // this should represent your organization name
    organization = "terraform"
  }
  allowed_uses = [
    "cert_signing",
    "server_auth",
    "client_auth",
  ]
  validity_period_hours = 8760 // 1 year
  is_ca_certificate     = true
}

resource "tls_private_key" "default" {
  algorithm = "RSA"
}

resource "tls_cert_request" "default" {
  private_key_pem = tls_private_key.default.private_key_pem
  dns_names       = []
  subject {
    // arguments to to supply for the format function are the namespace name, region, and account id
    common_name = format("%s-%s.%s", "terraform2", ["aws-us-east-1"], "terraform")
    // this should represent your organization name
    organization = "terraform"
  }
}

// This is the end-entity cert that is used to authorize the workers connecting to temporal cloud.
// Store this cert in KMS as a best practice
// Reference your KMS's provider documentation for details on how to store a cert in KMS
resource "tls_locally_signed_cert" "default" {
  cert_request_pem      = tls_cert_request.default.cert_request_pem
  ca_private_key_pem    = tls_private_key.ca.private_key_pem
  ca_cert_pem           = tls_self_signed_cert.ca.cert_pem
  validity_period_hours = var.certificate_expiration_hours
  allowed_uses = [
    "client_auth",
    "digital_signature"
  ]
  is_ca_certificate = false
}

// example namespace that uses the CA cert generated in this example
resource "temporalcloud_namespace" "terraform2" {
  name               = "terraform2"
  regions            = ["aws-us-east-1"]
  accepted_client_ca = base64encode(tls_self_signed_cert.ca.cert_pem)
  retention_days     = 14
  namespace_lifecycle = {
    // Prevents namespace from being deleted accidentally. Must be updated to false before destroying resource.
    enable_delete_protection = true
  }
}

// example namespace that uses API Key for authentication
resource "temporalcloud_namespace" "terraform3" {
  name           = "terraform3"
  regions        = ["aws-us-east-1"]
  api_key_auth   = true
  retention_days = 14
  namespace_lifecycle = {
    // Prevents namespace from being deleted accidentally. Must be updated to false before destroying resource.
    enable_delete_protection = true
  }
}

// Attaching connectivity rules to a namespace
resource "temporalcloud_namespace" "terraform4" {
  name               = "terraform4"
  regions            = ["aws-us-east-1"]
  accepted_client_ca = base64encode(tls_self_signed_cert.ca.cert_pem)
  retention_days     = 14
  // This is a placeholder rule ID. Please create a connectivity rule first,
  // then replace this value with the actual ID returned after creation.
  connectivity_rule_ids = [
    "0f806bg8-fe63-461c-81b3-17e3tcb0574b"
  ]
}
```

<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `name` (String) The name of the namespace.
- `regions` (List of String) The list of regions where this namespace is available. Must be one or two regions. See https://docs.temporal.io/cloud/regions for a list of available regions and HA options. Note that regions are prefixed with the cloud provider (aws-us-east-1, not us-east-1). If two regions are specified, the namespace will be replicated across them in a high availability (HA) configuration. Same-region, multi-region, and multi-cloud HA namespaces are supported. Please note that changing, adding, or removing regions for an existing namespace is not currently supported and the provider will throw an error. For HA namespaces the provider will ignore order changes on regions, which can happen if the namespace fails over.
- `retention_days` (Number) The number of days to retain workflow history. Any changes to the retention period will be applied to all new running workflows.

### Optional

- `accepted_client_ca` (String) The Base64-encoded CA cert in PEM format that clients use when authenticating with Temporal Cloud. This is a required field when a Namespace uses mTLS authentication.
- `api_key_auth` (Boolean) If true, Temporal Cloud will enable API key authentication for this namespace.
- `capacity` (Attributes) The capacity configuration for the namespace. (see [below for nested schema](#nestedatt--capacity))
- `certificate_filters` (Attributes List) A list of filters to apply to client certificates when initiating a connection Temporal Cloud. If present, connections will only be allowed from client certificates whose distinguished name properties match at least one of the filters. Empty lists are not allowed, omit the attribute instead. (see [below for nested schema](#nestedatt--certificate_filters))
- `codec_server` (Attributes) A codec server is used by the Temporal Cloud UI to decode payloads for all users interacting with this namespace, even if the workflow history itself is encrypted. (see [below for nested schema](#nestedatt--codec_server))
- `connectivity_rule_ids` (List of String) The IDs of the connectivity rules for this namespace.
- `namespace_lifecycle` (Attributes) The lifecycle configuration for the namespace. (see [below for nested schema](#nestedatt--namespace_lifecycle))
- `timeouts` (Block, Optional) (see [below for nested schema](#nestedblock--timeouts))

### Read-Only

- `endpoints` (Attributes) The endpoints for the namespace. (see [below for nested schema](#nestedatt--endpoints))
- `id` (String) The unique identifier of the namespace across all Temporal Cloud tenants.

<a id="nestedatt--capacity"></a>
### Nested Schema for `capacity`

Optional:

- `mode` (String) The mode of the capacity configuration. Must be one of 'provisioned' or 'on_demand'.
- `value` (Number) The value of the capacity configuration. Must be set when mode is 'provisioned'.


<a id="nestedatt--certificate_filters"></a>
### Nested Schema for `certificate_filters`

Optional:

- `common_name` (String) The certificate's common name.
- `organization` (String) The certificate's organization.
- `organizational_unit` (String) The certificate's organizational unit.
- `subject_alternative_name` (String) The certificate's subject alternative name (or SAN).


<a id="nestedatt--codec_server"></a>
### Nested Schema for `codec_server`

Required:

- `endpoint` (String) The endpoint of the codec server. Must begin with "https".

Optional:

- `include_cross_origin_credentials` (Boolean) If true, Temporal Cloud will include cross-origin credentials in requests to the codec server.
- `pass_access_token` (Boolean) If true, Temporal Cloud will pass the access token to the codec server upon each request.


<a id="nestedatt--namespace_lifecycle"></a>
### Nested Schema for `namespace_lifecycle`

Optional:

- `enable_delete_protection` (Boolean) If true, the namespace cannot be deleted. This is a safeguard against accidental deletion. To delete a namespace with this option enabled, you must first set it to false.


<a id="nestedblock--timeouts"></a>
### Nested Schema for `timeouts`

Optional:

- `create` (String) A string that can be [parsed as a duration](https://pkg.go.dev/time#ParseDuration) consisting of numbers and unit suffixes, such as "30s" or "2h45m". Valid time units are "s" (seconds), "m" (minutes), "h" (hours).
- `delete` (String) A string that can be [parsed as a duration](https://pkg.go.dev/time#ParseDuration) consisting of numbers and unit suffixes, such as "30s" or "2h45m". Valid time units are "s" (seconds), "m" (minutes), "h" (hours). Setting a timeout for a Delete operation is only applicable if changes are saved into state before the destroy operation occurs.


<a id="nestedatt--endpoints"></a>
### Nested Schema for `endpoints`

Read-Only:

- `grpc_address` (String) The gRPC address for API key client connections (may be empty if API keys are disabled).
- `mtls_grpc_address` (String) The gRPC address for mTLS client connections (may be empty if mTLS is disabled).
- `web_address` (String) The address in the Temporal Cloud Web UI for the namespace

## Import

Import is supported using the following syntax:

The [`terraform import` command](https://developer.hashicorp.com/terraform/cli/commands/import) can be used, for example:

```shell
# Namespace can be imported to incorporate existing Namespaces into your Terraform pipeline. 
# To import a Namespace, you need
# - a resource configuration in your Terraform configuration file/module to accept the imported Namespace. In the example below, the placeholder is "temporalcloud_namespace" "terraform"
# - the Namespace ID, which includes the Namespace Name and Account ID available at the top of the Namespace's page in the Temporal Cloud UI. In the example below, this is namespaceid.acctid

terraform import temporalcloud_namespace.terraform namespaceid.acctid
```
